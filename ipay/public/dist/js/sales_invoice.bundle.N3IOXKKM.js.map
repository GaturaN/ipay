{
  "version": 3,
  "sources": ["../../../../../apps/ipay/ipay/public/js/sales_invoice.js"],
  "sourcesContent": ["frappe.ui.form.on(\"Sales Invoice\", {\n   refresh(frm) {\n      const submitted = frm.doc.docstatus === 1;\n      const status = frm.doc.status;\n      const bal = frm.doc.outstanding_amount > 0;\n\n      if (submitted && bal && status !== \"Paid\") {\n         frm.add_custom_button(__(\"iPay Request\"), () => {\n            console.log(\"Button Working\");\n            //get values from the sales invoice and create an ipay request\n            const customer = frm.doc.customer;\n            const salesInvoice = frm.doc.name;\n\n            // call the frappe.client.insert\n            frappe.call({\n               method: \"frappe.client.insert\",\n               args: {\n                  doc: {\n                     doctype: \"iPay Request\",\n                     customer: customer,\n                     sales_invoice: salesInvoice,\n                     docstatus: 1,\n                  },\n               },\n               freeze: true,\n               async: true,\n               callback: function (r) {\n                  if (!r.exc) {\n                     frappe.msgprint(__(\"iPay Request Created successfully\"));\n\n                     //  route to newly created ipay request\n                     frappe.set_route(\"Form\", \"iPay Request\", r.message.name);\n                  } else {\n                     frappe.msgprint(__(\"Failed to create iPay Request\"));\n                  }\n               },\n            });\n         })\n            .addClass(\"btn-warning\")\n            .removeClass(\"btn-default\");\n      }\n   },\n});\n"],
  "mappings": ";;AAAA,SAAO,GAAG,KAAK,GAAG,iBAAiB;AAAA,IAChC,QAAQ,KAAK;AACV,YAAM,YAAY,IAAI,IAAI,cAAc;AACxC,YAAM,SAAS,IAAI,IAAI;AACvB,YAAM,MAAM,IAAI,IAAI,qBAAqB;AAEzC,UAAI,aAAa,OAAO,WAAW,QAAQ;AACxC,YAAI,kBAAkB,GAAG,cAAc,GAAG,MAAM;AAC7C,kBAAQ,IAAI,gBAAgB;AAE5B,gBAAM,WAAW,IAAI,IAAI;AACzB,gBAAM,eAAe,IAAI,IAAI;AAG7B,iBAAO,KAAK;AAAA,YACT,QAAQ;AAAA,YACR,MAAM;AAAA,cACH,KAAK;AAAA,gBACF,SAAS;AAAA,gBACT;AAAA,gBACA,eAAe;AAAA,gBACf,WAAW;AAAA,cACd;AAAA,YACH;AAAA,YACA,QAAQ;AAAA,YACR,OAAO;AAAA,YACP,UAAU,SAAU,GAAG;AACpB,kBAAI,CAAC,EAAE,KAAK;AACT,uBAAO,SAAS,GAAG,mCAAmC,CAAC;AAGvD,uBAAO,UAAU,QAAQ,gBAAgB,EAAE,QAAQ,IAAI;AAAA,cAC1D,OAAO;AACJ,uBAAO,SAAS,GAAG,+BAA+B,CAAC;AAAA,cACtD;AAAA,YACH;AAAA,UACH,CAAC;AAAA,QACJ,CAAC,EACG,SAAS,aAAa,EACtB,YAAY,aAAa;AAAA,MAChC;AAAA,IACH;AAAA,EACH,CAAC;",
  "names": []
}
